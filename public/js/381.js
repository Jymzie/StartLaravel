"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[381],{7381:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});const n={created:function(){var e=this;this.mGetList(),this.mGetQueue(),this.$socket.on("reloadme",(function(){e.mGetQueue()}))},data:function(){return{header:[],list:[],header2:[],queue:[],search:"",toupload:!1,file:{name:"",content:null},uploading:!1,uploadProgress:0}},methods:{mGetList:function(){var e=this;axios.get("api/play").then((function(t){0!=t.data.length?(e.list=t.data,e.header=Object.keys(t.data[0])):e.list=[]}))},mGetQueue:function(){var e=this;axios.get("api/play?mode=q").then((function(t){0!=t.data.length?(e.queue=t.data,e.header2=Object.keys(t.data[0])):e.queue=[]}))},mToQueue:function(e){var t=this;axios.post("api/play",e).finally((function(){t.$socket.emit("reload_data")}))},mUpload:function(){var e=this,t=new FormData;t.append("name",this.file.name),t.append("content",this.file.content),this.uploading=!0,axios.post("".concat(this.$url,"/api/play"),t,{onUploadProgress:function(t){var a=Math.round(100*t.loaded/t.total);e.uploadProgress=a,console.log(e.uploadProgress,"loaded",t.loaded,"total",t.total)}}).then((function(t){e.toupload=!1,e.uploading=!1,alert("Video has been added!"),e.mGetList(),e.mCloseUpload()}))},mCloseUpload:function(){this.toupload=!1,this.file={name:"",content:null}},mClear:function(){var e=this;axios.delete("api/play/clear").finally((function(){e.$socket.emit("reload_data")}))},mToCancel:function(e){var t=this;axios.delete("api/play/cancel?no=".concat(e.No)).finally((function(){t.$socket.emit("reload_data")}))}},computed:{cFilter:function(){var e=this;return this.search?this.list.filter((function(t){return t.Title.toUpperCase().includes(e.search.toUpperCase())})):this.list},cQueueHeader:function(){if(this.header2)return this.header2.filter((function(e){return!e.includes("Link")}))}}};const l=(0,a(4486).A)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-row",[a("v-col",{attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[a("v-card",{attrs:{color:"black"}},[a("v-card-title",[a("h1",{staticStyle:{color:"white"}},[e._v("\n                      List\n                  ")])]),e._v(" "),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"10"}},[a("v-text-field",{attrs:{"background-color":"white",outlined:"",dense:"",placeholder:"Search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),a("v-col",{attrs:{cols:"2"}},[a("v-btn",{on:{click:function(t){e.toupload=!0}}},[a("v-icon",[e._v("\n                                  mdi-upload\n                              ")])],1)],1)],1),e._v(" "),a("v-simple-table",{staticClass:"text-center",attrs:{"fixed-header":"",height:.62*e.$vuetify.breakpoint.height}},[a("thead",[a("tr",[e._l(e.header,(function(t,n){return a("th",{key:n,staticClass:"text-center"},[e._v(e._s(t))])})),e._v(" "),a("th",{staticClass:"text-center"},[e._v("Play")])],2)]),e._v(" "),a("tbody",e._l(e.cFilter,(function(t,n){return a("tr",{key:n},[e._l(e.header,(function(n,l){return a("td",{key:l},[e._v("\n                                  "+e._s(t[n])+"\n                              ")])})),e._v(" "),a("td",[a("v-icon",{on:{click:function(a){return e.mToQueue(t)}}},[e._v("\n                                      mdi-play\n                                  ")])],1)],2)})),0)])],1)],1)],1),e._v(" "),a("v-col",{attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[a("v-card",{attrs:{color:"black"}},[a("v-card-title",[a("h1",{staticStyle:{color:"white"}},[e._v("\n                      Queue\n                     \n                  ")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{on:{click:e.mClear}},[e._v("\n                          Clear\n                      ")])],1),e._v(" "),a("v-card-text",[a("v-simple-table",{staticClass:"text-center",attrs:{"fixed-header":"",height:.7*e.$vuetify.breakpoint.height}},[0!=e.queue.length?a("thead",[a("tr",[e._l(e.cQueueHeader,(function(t,n){return a("th",{key:n,staticClass:"text-center"},[e._v(e._s(t))])})),e._v(" "),a("th",{staticClass:"text-center"},[e._v("Cancel")])],2)]):e._e(),e._v(" "),a("tbody",e._l(e.queue,(function(t,n){return a("tr",{key:n},[e._l(e.cQueueHeader,(function(n,l){return a("td",{key:l},[e._v("\n                                  "+e._s(t[n])+"\n                              ")])})),e._v(" "),a("td",[a("v-icon",{on:{click:function(a){return e.mToCancel(t)}}},[e._v("\n                                      mdi-close\n                                  ")])],1)],2)})),0)])],1)],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{"max-width":"50%",persistent:""},model:{value:e.toupload,callback:function(t){e.toupload=t},expression:"toupload"}},[a("v-card",[a("v-card-title",[e._v("Upload\n          "),a("v-spacer"),e._v(" "),a("v-icon",{on:{click:e.mCloseUpload}},[e._v("mdi-close")])],1),e._v(" "),a("v-card-text",[a("v-text-field",{attrs:{dense:"",outlined:""},model:{value:e.file.name,callback:function(t){e.$set(e.file,"name",t)},expression:"file.name"}}),e._v(" "),a("v-file-input",{attrs:{dense:"",outlined:""},model:{value:e.file.content,callback:function(t){e.$set(e.file,"content",t)},expression:"file.content"}}),e._v(" "),a("v-btn",{attrs:{block:"",disabled:""==e.file.name||null==e.file.content},on:{click:e.mUpload}},[a("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:1==e.uploading,expression:"uploading == true ? true : false"}],attrs:{color:"primary",rotate:360,value:e.uploadProgress}},[e._v(e._s(e.uploadProgress)+"%")]),e._v("\n\n                  Upload\n              ")],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports}}]);