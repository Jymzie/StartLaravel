"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[174],{5144:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(6314),i=n.n(a)()((function(e){return e[1]}));i.push([e.id,".play-button{bottom:0;left:50%}.close-button,.play-button{background:transparent;border:none;cursor:pointer;padding:0;position:absolute;transform:translate(-50%,-50%);z-index:1}.close-button{left:98%;top:5%}canvas{height:95%;width:100%}",""]);const o=i},6314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,a){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(a)for(var o=0;o<this.length;o++){var r=this[o][0];null!=r&&(i[r]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);a&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},5072:(e,t,n)=>{var a,i=function(){return void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a},o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),r=[];function s(e){for(var t=-1,n=0;n<r.length;n++)if(r[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},a=[],i=0;i<e.length;i++){var o=e[i],c=t.base?o[0]+t.base:o[0],l=n[c]||0,h="".concat(c," ").concat(l);n[c]=l+1;var d=s(h),v={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(r[d].references++,r[d].updater(v)):r.push({identifier:h,updater:p(v,t),references:1}),a.push(h)}return a}function l(e){var t=document.createElement("style"),a=e.attributes||{};if(void 0===a.nonce){var i=n.nc;i&&(a.nonce=i)}if(Object.keys(a).forEach((function(e){t.setAttribute(e,a[e])})),"function"==typeof e.insert)e.insert(t);else{var r=o(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var h,d=(h=[],function(e,t){return h[e]=t,h.filter(Boolean).join("\n")});function v(e,t,n,a){var i=n?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(e.styleSheet)e.styleSheet.cssText=d(t,i);else{var o=document.createTextNode(i),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(o,r[t]):e.appendChild(o)}}function u(e,t,n){var a=n.css,i=n.media,o=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}var m=null,f=0;function p(e,t){var n,a,i;if(t.singleton){var o=f++;n=m||(m=l(t)),a=v.bind(null,n,o,!1),i=v.bind(null,n,o,!0)}else n=l(t),a=u.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var a=0;a<n.length;a++){var i=s(n[a]);r[i].references--}for(var o=c(e,t),l=0;l<n.length;l++){var h=s(n[l]);0===r[h].references&&(r[h].updater(),r.splice(h,1))}n=o}}}},6174:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});const a={data:function(){return{isPhotoTaken:!1,imageName:"TRRYY",ischangeorientation:"",isRecording:!1,photocount:0,window:{width:"",height:""},Fullscreen:!1}},created:function(){this.window={width:screen.width,height:screen.height,orientation:screen.width>screen.height?"Landscape":"Portrait"},this.getPhotocount(),this.createCamera()},mounted:function(){this.detectOrientation(),window.addEventListener("resize",this.detectOrientation)},beforeUnmount:function(){window.removeEventListener("resize",this.detectOrientation)},beforeDestroy:function(){this.stopCameraStream("yes")},watch:{ischangeorientation:function(e,t){e!=t&&(this.isPhotoTaken=!0,this.isPhotoTaken=!1)}},methods:{detectOrientation:function(){var e=window.matchMedia("(orientation: portrait)").matches;this.$emit("orientationChange",e),this.window={width:screen.width,height:screen.height,orientation:screen.width>screen.height?"Landscape":"Portrait"},this.ischangeorientation=e},mRecord:function(){this.isRecording=!this.isRecording},mCapture:function(){this.isPhotoTaken=!this.isPhotoTaken;var e=this.$refs.canvas.getContext("2d");1==this.Fullscreen&&(e=this.$refs.canvasfull.getContext("2d")),e.clearRect(0,0,e.canvas.width,e.canvas.height);var t=this.window.width,n=this.window.height;e.canvas.width=t,e.canvas.height=n,e.drawImage(this.$refs.camera,0,0,e.canvas.width,e.canvas.height)},savePicture:function(){var e=this,t=document.getElementById("photoTaken");1==this.Fullscreen&&(t=document.getElementById("photoTakenfull")),t.toBlob((function(t){var n={title:"image",folder:"Capture"},a=new File([t],e.imageName+".jpg"),i=new FormData;i.append("file",a),i.append("params",JSON.stringify(n)),axios({method:"POST",url:"api/capture",data:i,headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.getPhotocount(),e.stopCameraStream()})).catch((function(t){var n=500;null!=t.response?n=t.response.status:console.log(t),e.$store.dispatch("setStatusCode",n),e.$router.push("/error/"+n)}))}))},createCamera:function(e){var t=this;e&&(this.Fullscreen=!0);var n=window.constraints={audio:!0,video:{facingMode:"environment"}};navigator.mediaDevices.getUserMedia(n).then((function(e){t.$refs.camera.srcObject=e})).catch((function(e){alert("Failed to stream!")}))},stopCameraStream:function(e){(this.isPhotoTaken=!1,"yes"==e)&&this.$refs.camera.srcObject.getTracks().forEach((function(e){e.stop()}))},getPhotocount:function(){var e=this;axios.get("api/capture").then((function(t){e.photocount=t.data}))}}};var i=n(5072),o=n.n(i),r=n(5144),s={insert:"head",singleton:!1};o()(r.A,s);r.A.locals;const c=(0,n(4486).A)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"d-flex justify-center"},[n("v-card",{attrs:{width:"45%"}},[n("v-card-text",[n("div",{staticStyle:{"background-color":"white",height:"70vh"}},[n("video",{directives:[{name:"show",rawName:"v-show",value:!e.isPhotoTaken,expression:"!isPhotoTaken"}],ref:"camera",staticClass:"video",attrs:{autoplay:"",width:"100%",height:"100%"}}),e._v(" "),n("canvas",{directives:[{name:"show",rawName:"v-show",value:e.isPhotoTaken,expression:"isPhotoTaken"}],ref:"canvas",staticClass:"video",attrs:{id:"photoTaken"}})])])],1)],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.isPhotoTaken,expression:"!isPhotoTaken"}],staticClass:"text-center my-3"},[n("v-btn",{attrs:{fab:"","x-large":""},on:{click:e.mRecord}},[e.isRecording?n("v-icon",{attrs:{"x-large":""}},[e._v("mdi-stop")]):n("v-icon",{attrs:{"x-large":"",color:"red"}},[e._v("mdi-record")])],1),e._v(" "),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:!e.isRecording,expression:"!isRecording"}],attrs:{fab:"","x-large":""},on:{click:e.mCapture}},[n("v-icon",{attrs:{"x-large":""}},[e._v("mdi-camera")])],1),e._v(" "),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:!e.isRecording,expression:"!isRecording"}],attrs:{fab:""},on:{click:function(t){return e.createCamera("full")}}},[n("v-icon",[e._v("mdi-fullscreen")])],1)],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isPhotoTaken,expression:"isPhotoTaken"}],staticClass:"text-center my-3"},[n("v-btn",{staticClass:"text-center green white--text",attrs:{bottom:""},on:{click:e.savePicture}},[n("v-icon",{staticClass:"mr-5"},[e._v("mdi-content-save")]),e._v("\n      Save\n    ")],1),e._v(" "),n("v-btn",{staticClass:"text-center red white--text",attrs:{bottom:""},on:{click:e.stopCameraStream}},[n("v-icon",{staticClass:"mr-1"},[e._v("mdi-close")]),e._v("\n      Discard\n    ")],1)],1),e._v(" "),n("v-dialog",{attrs:{fullscreen:"",persistent:""},model:{value:e.Fullscreen,callback:function(t){e.Fullscreen=t},expression:"Fullscreen"}},[n("v-card",{attrs:{flat:"",color:"black"}},[n("v-card-text",[n("div",{staticClass:"text-center video-container"},[n("video",{directives:[{name:"show",rawName:"v-show",value:!e.isPhotoTaken,expression:"!isPhotoTaken"}],ref:"camera",staticClass:"video",attrs:{autoplay:"",width:"63%"}}),e._v(" "),n("canvas",{directives:[{name:"show",rawName:"v-show",value:e.isPhotoTaken,expression:"isPhotoTaken"}],ref:"canvasfull",staticClass:"video",staticStyle:{width:"84%"},attrs:{id:"photoTakenfull"}}),e._v(" "),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:!e.isPhotoTaken,expression:"!isPhotoTaken"}],staticClass:"text-center play-button",attrs:{fab:"","x-large":""},on:{click:e.mCapture}},[n("v-icon",{attrs:{"x-large":"",color:"primary"}},[e._v("mdi-camera-outline")])],1),e._v(" "),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:!e.isPhotoTaken,expression:"!isPhotoTaken"}],staticClass:"text-center close-button",attrs:{fab:"",small:"",color:"red"},on:{click:function(t){e.Fullscreen=!1}}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-close-thick")])],1),e._v(" "),n("v-row",{directives:[{name:"show",rawName:"v-show",value:e.isPhotoTaken,expression:"isPhotoTaken"}],staticClass:"play-button"},[n("v-col",{attrs:{cols:"6"}},[n("v-btn",{staticClass:"text-center green white--text",attrs:{bottom:""},on:{click:e.savePicture}},[n("v-icon",{staticClass:"mr-5"},[e._v("mdi-content-save")]),e._v("\n                Save\n              ")],1)],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-btn",{staticClass:"text-center red white--text",attrs:{bottom:""},on:{click:e.stopCameraStream}},[n("v-icon",{staticClass:"mr-1"},[e._v("mdi-close")]),e._v("\n                Discard\n              ")],1)],1)],1)],1)])],1)],1),e._v(" "),n("div",{staticStyle:{"background-color":"gray",width:"100%"}},[n("v-row",e._l(e.photocount,(function(e,t){return n("v-col",{key:t,attrs:{cols:"2"}},[n("v-img",{attrs:{src:"storage/Capture/Sample/image_"+(t+1)+".jpg?"+Date()}})],1)})),1)],1)],1)}),[],!1,null,null,null).exports}}]);